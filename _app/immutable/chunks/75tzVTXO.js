import"./DsnmJJEf.js";import{p as J,x as h,y as X,c as K,e as q,a as O,b as o,f as p,d as r,r as e,t as $,s,n as E,h as Et,z as wt,I as Zt}from"./iOdzdy3x.js";import{a as qt,s as pt,d as Ct}from"./BEcV18IW.js";import{p as W,i as I}from"./D_ShskPG.js";import{a as Z,e as _t,f as Pt,S as Jt,s as Kt,c as Qt,b as Wt}from"./BFdLDlKi.js";import{t as Y,s as ct,f as Xt,b as $t,c as nt}from"./B-6PjeIb.js";import{C as te}from"./CWXyl83Z.js";import{r as ee}from"./CF_rgvJJ.js";import{C as kt}from"./BUdTUlvp.js";import{i as D,j as re,A as ae,a as se,o as zt,w as Lt,b as oe,x as ie}from"./BaMhdA5r.js";import{P as Tt,a as ne}from"./Dj_q1ENl.js";import{f as Gt,P as Dt}from"./LkvzrlO1.js";import{C as le}from"./DvWkrdWm.js";import{R as de}from"./Cn7zRXx4.js";import{P as pe,a as _e}from"./Bs1Qz0vm.js";import{D as ce}from"./CsElDmwN.js";import{T as me,E as ve}from"./Db4yH4GM.js";import{r as ue}from"./DJc2yc4b.js";import{D as lt,b as dt}from"./CclMSJRC.js";import{E as fe}from"./GpoyK2O_.js";function ge(u,a){J(a,!0);const t=X(()=>a.prompt.token_count);le(u,{get token_count(){return h(t)}}),K()}const he=u=>{var a=be();o(u,a)};var be=p('<small class="font_family_mono">[no parts yet]</small>'),xe=p("<li><!></li>"),ye=p("<ul></ul>"),we=p("<li><!></li>"),Pe=p("<ul></ul>");function ke(u,a){J(a,!0);const t=W(a,"empty",3,he),m=X(()=>a.onreorder?new de(a.reorderable_options):null);var C=q(),b=O(C);{var f=d=>{var _=q(),g=O(_);qt(g,t),o(d,_)},z=d=>{var _=q(),g=O(_);{var G=x=>{var n=ye();Z(n,()=>({...a.attrs,class:`unstyled column gap_xs5 ${a.attrs?.class??""}`})),_t(n,23,()=>a.parts,y=>y.id,(y,H,w)=>{var P=xe();Z(P,()=>({...a.item_attrs,class:`border_radius_xs ${a.item_attrs?.class??""}`}));var tt=r(P);Tt(tt,{get part(){return h(H)},get prompt(){return a.prompt}}),e(P),Pt(P,()=>h(m).item({index:h(w)})),Y(3,P,()=>ct),o(y,P)}),e(n),Pt(n,()=>h(m).list({onreorder:a.onreorder})),o(x,n)},R=x=>{var n=Pe();Z(n,()=>({...a.attrs,class:`unstyled column gap_xs5 ${a.attrs?.class??""}`})),_t(n,21,()=>a.parts,y=>y.id,(y,H)=>{var w=we();Z(w,()=>({...a.item_attrs,class:`border_radius_xs ${a.item_attrs?.class??""}`}));var P=r(w);Tt(P,{get part(){return h(H)},get prompt(){return a.prompt}}),e(w),Y(3,w,()=>ct),o(y,w)}),e(n),o(x,n)};I(g,x=>{h(m)&&a.onreorder?x(G):x(R,!1)},!0)}o(d,_)};I(b,d=>{a.parts.length===0?d(f):d(z,!1)})}o(u,C),K()}var ze=p("<pre> </pre>");function Le(u,a){J(a,!0);const t=W(a,"height",3,"200px"),m=W(a,"min_height",19,t),C=W(a,"max_height",19,t);var b=ze();Z(b,()=>({...a.attrs,class:`flex:1 width:100% overflow:auto scrollbar-width:thin border_radius_xs font_family_sans font_size_sm shade_10 px_md py_xs ${a.attrs?.class??""}`,[Jt]:{height:t(),"min-height":m(),"max-height":C()}}));var f=r(b,!0);e(b),$(()=>pt(f,a.content)),o(u,b),K()}var Te=p(`<div class="pt_lg"><div><aside><p>The prompt builder UI is very rough. The plan is to experiment with many ideas for making
					and managing prompts, both simpler and more complex than this first iteration. Zzz will
					likewise explore variants of the <a>chat</a> interface. Share
					your ideas in the <!>.</p> <button type="button" class="compact">okay</button></aside></div></div>`);function De(u,a){J(a,!0);const t=Gt.get();var m=q(),C=O(m);{var b=f=>{var z=Te(),d=r(z),_=r(d),g=r(_),G=s(r(g)),R=s(G,2);fe(R,{href:"https://github.com/fuzdev/zzz/discussions",children:(n,y)=>{E();var H=Et("discussions");o(n,H)},$$slots:{default:!0}}),E(),e(g);var x=s(g,2);x.__click=()=>{t.ui.tutorial_for_prompts=!1},e(_),e(d),e(z),$(n=>Kt(G,"href",n),[()=>ue("/chats")]),Y(2,_,()=>Xt,()=>({duration:lt,y:-1,x:10})),Y(2,d,()=>$t,()=>({duration:lt})),Y(2,z,()=>ct,()=>({delay:lt})),o(f,z)};I(C,f=>{t.ui.tutorial_for_prompts&&f(b)})}o(u,m),K()}Ct(["click"]);var Ee=p('<button type="button" title="toggle sort controls"><!></button>'),Ce=p('<div class="row white-space:nowrap"><!>&nbsp; remove all</div>'),Ge=p('<li><div class="shade_00 border_radius_xs p_sm"><!></div></li>'),Re=p('<div class="column_fixed pr_sm"><section class="column_section"><div class="font_size_lg display:flex align-items:center"><!> <!></div> <div class="column"><small> </small> <small> <!></small></div> <div class="row gap_xs py_xs"><!> <div class="flex:1"><!></div> <!></div> <!></section> <section class="column_section"><header class="font_size_lg mb_lg"><!> parts</header> <!></section></div> <div class="column_fluid"><div class="column_bg_1 column gap_md p_sm"><div class="display:flex justify-content:space-between"><div class="display:flex flex-wrap:wrap gap_xs"><button type="button" class="plain font_size_sm"><div class="row white-space:nowrap"><!>&nbsp; add text</div></button> <button type="button" class="plain font_size_sm"><div class="row white-space:nowrap"><!>&nbsp; add file</div></button> <!></div></div> <ul class="unstyled display:grid gap_md"></ul></div></div>',1),Se=p('<div class="box height:100% flex:1"><p>select a prompt from the list or <button type="button" class="inline color_d">create one</button> or <button type="button" class="inline color_f">go fish</button>?</p></div>'),Ye=p('<div class="box height:100% flex:1"><p>no prompts yet, <button type="button" class="inline color_d">create a new prompt</button>?</p></div>'),He=p('<div class="display:flex width:100% height:100%"><div class="column_fixed"><div class="p_sm pl_0"><div class="row gap_xs2 mb_xs pl_xs2"><button type="button" class="plain width:100% justify-content:start"><!>&nbsp; new prompt</button> <!></div> <!></div> <!> <!></div> <!></div> <!>',1);function rr(u,a){J(a,!0);const t=Gt.get();let m=Zt(!1);const C=()=>{if(!t.prompts.selected)return;const i=Dt.create(t,{type:"text",content:""});t.prompts.selected.add_part(i)},b=()=>{t.prompts.selected&&wt(m,!0)},f=async()=>{const i=t.prompts.add();await t.prompts.navigate_to(i.id)};var z=He(),d=O(z),_=r(d),g=r(_),G=r(g),R=r(G);R.__click=f;var x=r(R);D(x,{get glyph(){return re}}),E(),e(R);var n=s(R,2);{var y=i=>{var v=Ee();let M;v.__click=()=>t.prompts.toggle_sort_controls();var j=r(v);D(j,{get glyph(){return ae}}),e(v),$(()=>M=Qt(v,1,"plain compact selectable deselectable",null,M,{selected:t.prompts.show_sort_controls})),o(i,v)};I(n,i=>{t.prompts.items.size>1&&i(y)})}e(G);var H=s(G,2);pe(H,{}),e(g);var w=s(g,2);me(w,{});var P=s(w,2);De(P,{}),e(_);var tt=s(_,2);{var Rt=i=>{_e(i,{get prompt(){return t.prompts.selected},children:(v,M)=>{var j=Re(),U=O(j),k=r(U),c=r(k),S=r(c);D(S,{get glyph(){return se}});var F=s(S,2);ve(F,{get value(){return t.prompts.selected.name},set value(l){t.prompts.selected.name=l}}),e(c);var N=s(c,2),V=r(N),Ht=r(V);e(V);var mt=s(V,2),vt=r(mt),At=s(vt);{var It=l=>{var L=Et("s");o(l,L)};I(At,l=>{t.prompts.selected.parts.length!==1&&l(It)})}e(mt),e(N);var et=s(N,2),ut=r(et);te(ut,{get text(){return t.prompts.selected.content},class:"plain"});var rt=s(ut,2),Ot=r(rt);ge(Ot,{get prompt(){return t.prompts.selected}}),e(rt);var jt=s(rt,2);{const l=T=>{D(T,{get glyph(){return zt}})};let L=X(()=>'"'+t.prompts.selected.name+'"');kt(jt,{onconfirm:()=>t.prompts.selected&&t.prompts.remove(t.prompts.selected),get title(){return`delete prompt ${h(L)??""}`},class:"plain icon_button",popover_button_content:l,children:(T,A)=>{D(T,{get glyph(){return zt}})},$$slots:{popover_button_content:!0,default:!0}})}e(et);var Ft=s(et,2);Le(Ft,{get content(){return t.prompts.selected.content}}),e(k);var ft=s(k,2),at=r(ft),Mt=r(at);D(Mt,{get glyph(){return Lt}}),E(),e(at);var Ut=s(at,2);ke(Ut,{get parts(){return t.prompts.selected.parts},get prompt(){return t.prompts.selected},onreorder:(l,L)=>{t.prompts.selected?.reorder_parts(l,L)}}),e(ft),e(U);var gt=s(U,2),ht=r(gt),st=r(ht),bt=r(st),Q=r(bt);Q.__click=C;var xt=r(Q),Nt=r(xt);D(Nt,{get glyph(){return Lt}}),E(),e(xt),e(Q);var B=s(Q,2);B.__click=b;var yt=r(B),Vt=r(yt);D(Vt,{get glyph(){return oe}}),E(),e(yt),e(B);var Bt=s(B,2);{let l=X(()=>!t.prompts.selected.parts.length);kt(Bt,{onconfirm:()=>t.prompts.selected?.remove_all_parts(),get disabled(){return h(l)},class:"plain font_size_sm",children:(L,T)=>{var A=Ce(),it=r(A);D(it,{get glyph(){return ie}}),E(),e(A),o(L,A)},$$slots:{default:!0}})}e(bt),e(st);var ot=s(st,2);Wt(ot,"",{},{"grid-template-columns":"repeat(auto-fill, minmax(300px, 1fr))"}),_t(ot,21,()=>t.prompts.selected.parts,l=>l.id,(l,L)=>{var T=Ge(),A=r(T),it=r(A);ne(it,{get part(){return h(L)}}),e(A),e(T),Y(1,T,()=>nt,()=>({duration:dt})),o(l,T)}),e(ot),e(ht),e(gt),$(()=>{pt(Ht,`created ${t.prompts.selected.created_formatted_short_date??""}`),pt(vt,`${t.prompts.selected.parts.length??""}
							part`),B.disabled=!t.diskfiles.items.size}),o(v,j)},$$slots:{default:!0}})},St=i=>{var v=q(),M=O(v);{var j=k=>{var c=Se(),S=r(c),F=s(r(S));F.__click=f;var N=s(F,2);N.__click=async()=>{const V=ee(t.prompts.ordered_items);await t.prompts.navigate_to(V.id)},E(),e(S),e(c),Y(1,c,()=>nt,()=>({duration:dt})),o(k,c)},U=k=>{var c=Ye(),S=r(c),F=s(r(S));F.__click=f,E(),e(S),e(c),Y(1,c,()=>nt,()=>({duration:dt})),o(k,c)};I(M,k=>{t.prompts.items.size?k(j):k(U,!1)},!0)}o(i,v)};I(tt,i=>{t.prompts.selected?i(Rt):i(St,!1)})}e(d);var Yt=s(d,2);ce(Yt,{onpick:i=>{if(!t.prompts.selected||!i)return!1;const v=Dt.create(t,{type:"diskfile",path:i.path});return t.prompts.selected.add_part(v),!0},get show(){return h(m)},set show(i){wt(m,i,!0)}}),o(u,z),K()}Ct(["click"]);export{rr as D};
