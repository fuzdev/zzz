import"./DsnmJJEf.js";import{p as He,f as b,d as n,s as v,x as a,y as J,r as s,t as C,b as d,c as Fe,h as A,I as ke,z as N,e as Ye,a as ie,n as ve}from"./iOdzdy3x.js";import{s as R,d as Ee,c as je}from"./BEcV18IW.js";import{i as D,p as Ge}from"./D_ShskPG.js";import{e as Ne,b as Ae,r as Ce,c as Re}from"./BFdLDlKi.js";import{t as Me,s as De}from"./B-6PjeIb.js";import{P as Pe}from"./DStZKaXO.js";import{i as oe,H as Ue,I as Ve,f as Le,l as qe,d as Be}from"./BaMhdA5r.js";import{M as Je}from"./C8RJo2qd.js";import{a as Ke}from"./DM4ztRtC.js";import{i as K,n as Ie,j as Xe,k as Qe,l as We,m as ze,o as fe}from"./CclMSJRC.js";import{b as Ze}from"./dr4kURsa.js";import{f as $e}from"./LkvzrlO1.js";import{P as ea}from"./WP1MSYGU.js";import{E as aa}from"./D6gcmofG.js";import{E as we}from"./GpoyK2O_.js";function me(l,e){const r=+K(l)-+K(e);return r<0?-1:r>0?1:r}function ta(l,e,r){const[_,t]=Ie(r?.in,l,e),u=_.getFullYear()-t.getFullYear(),f=_.getMonth()-t.getMonth();return u*12+f}function sa(l){return e=>{const _=(l?Math[l]:Math.trunc)(e);return _===0?0:_}}function na(l,e){return+K(l)-+K(e)}function ra(l,e){const r=K(l,e?.in);return r.setHours(23,59,59,999),r}function ia(l,e){const r=K(l,e?.in),_=r.getMonth();return r.setFullYear(r.getFullYear(),_+1,0),r.setHours(23,59,59,999),r}function oa(l,e){const r=K(l,e?.in);return+ra(r,e)==+ia(r,e)}function la(l,e,r){const[_,t,u]=Ie(r?.in,l,l,e),f=me(t,u),i=Math.abs(ta(t,u));if(i<1)return 0;t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-f*i);let m=me(t,u)===-f;oa(_)&&i===1&&me(_,u)===1&&(m=!1);const g=f*(i-+m);return g===0?0:g}function da(l,e,r){const _=na(l,e)/1e3;return sa(r?.roundingMethod)(_)}function ca(l,e,r){const _=Qe(),t=r?.locale??_.locale??We,u=2520,f=me(l,e);if(isNaN(f))throw new RangeError("Invalid time value");const i=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:f}),[m,g]=Ie(r?.in,...f>0?[e,l]:[l,e]),w=da(g,m),ee=(Xe(g)-Xe(m))/1e3,p=Math.round((w-ee)/60);let O;if(p<2)return r?.includeSeconds?w<5?t.formatDistance("lessThanXSeconds",5,i):w<10?t.formatDistance("lessThanXSeconds",10,i):w<20?t.formatDistance("lessThanXSeconds",20,i):w<40?t.formatDistance("halfAMinute",0,i):w<60?t.formatDistance("lessThanXMinutes",1,i):t.formatDistance("xMinutes",1,i):p===0?t.formatDistance("lessThanXMinutes",1,i):t.formatDistance("xMinutes",p,i);if(p<45)return t.formatDistance("xMinutes",p,i);if(p<90)return t.formatDistance("aboutXHours",1,i);if(p<ze){const c=Math.round(p/60);return t.formatDistance("aboutXHours",c,i)}else{if(p<u)return t.formatDistance("xDays",1,i);if(p<fe){const c=Math.round(p/ze);return t.formatDistance("xDays",c,i)}else if(p<fe*2)return O=Math.round(p/fe),t.formatDistance("aboutXMonths",O,i)}if(O=la(g,m),O<12){const c=Math.round(p/fe);return t.formatDistance("xMonths",c,i)}else{const c=O%12,k=Math.trunc(O/12);return c<3?t.formatDistance("aboutXYears",k,i):c<9?t.formatDistance("overXYears",k,i):t.formatDistance("almostXYears",k+1,i)}}var _a=b('<div class="display:flex justify-content:space-between align-items:center p_sm border_radius_xs shade_10"><div class="display:flex gap_sm align-items:center"><!> <span> </span></div></div>'),ua=b("<small> </small>"),va=b("<small><!></small>"),fa=b('<div class="display:flex justify-content:space-between align-items:center p_sm border_radius_xs shade_10"><div class="display:flex gap_sm align-items:center"><button type="button" class="icon_button plain" title="view model details"><!></button> <!> <!></div> <div class="display:flex gap_sm align-items:center"><!> <button type="button" class="icon_button plain" title="unload model from memory"><!></button></div></div>'),ma=b('<li class="py_xs3"><!></li>'),pa=b('<ul class="unstyled"></ul>'),ga=b('<p class="font_size_sm">no models currently loaded</p>'),ha=b('<div class="panel p_md width_atmost_md"><div class="display:flex justify-content:space-between align-items:center mb_md"><h4 class="mt_0 mb_0">active models</h4> <div class="display:flex align-items:center gap_sm"><!> <button type="button" class="plain align-items:center gap_sm" title="polls Ollama continuously for the status of running models"><!> <span> </span></button></div></div> <!></div>');function Ca(l,e){He(e,!0);var r=ha(),_=n(r),t=v(n(_),2),u=n(t);{var f=c=>{Pe(c,{})};D(u,c=>{e.ollama.ps_status==="pending"&&c(f)})}var i=v(u,2);i.__click=()=>{e.ollama.ps_polling_enabled?e.ollama.stop_ps_polling():e.ollama.start_ps_polling()};var m=n(i);{let c=J(()=>e.ollama.ps_polling_enabled?Ue:Ve);oe(m,{get glyph(){return a(c)}})}var g=v(m,2),w=n(g);s(g),s(i),s(t),s(_);var ee=v(_,2);{var p=c=>{var k=pa();Ne(k,21,()=>e.ollama.running_models,ae=>ae.name,(ae,S)=>{const h=J(()=>e.ollama.model_by_name.get(a(S).name));var P=ma(),U=n(P);{var L=x=>{var M=_a(),X=n(M),z=n(X);oe(z,{get glyph(){return Le}});var Q=v(z,2),V=n(Q);s(Q),s(X),s(M),C(()=>R(V,`model ${a(S).name??""} not found`)),d(x,M)},te=x=>{var M=fa(),X=n(M),z=n(X);z.__click=()=>e.ollama.select(e.ollama.model_by_name.get(a(S).name));var Q=n(z);oe(Q,{get glyph(){return Le}}),s(z);var V=v(z,2);Je(V,{get model(){return a(h)}});var pe=v(V,2);{var ge=H=>{var E=ua(),ne=n(E);s(E),C(F=>R(ne,`VRAM: ${F??""}`),[()=>Ke(a(S).size_vram)]),d(H,E)};D(pe,H=>{a(S).size_vram>0&&H(ge)})}s(X);var le=v(X,2),se=n(le);{var W=H=>{const E=J(()=>new Date(a(S).expires_at)),ne=J(()=>a(E).valueOf());var F=va(),de=n(F);{var ce=T=>{var o=A();C(y=>R(o,`expires ${y??""}`),[()=>ca(a(E),e.ollama.app.time.now_ms,{addSuffix:!0})]),d(T,o)},he=T=>{var o=A("expired");d(T,o)};D(de,T=>{a(ne)>e.ollama.app.time.now_ms?T(ce):T(he,!1)})}s(F),d(H,F)};D(se,H=>{a(S).expires_at&&H(W)})}var Z=v(se,2);Z.__click=()=>e.ollama.unload(a(S).name);var q=n(Z);oe(q,{get glyph(){return qe}}),s(Z),s(le),s(M),d(x,M)};D(U,x=>{a(h)?x(te,!1):x(L)})}s(P),Me(3,P,()=>De),d(ae,P)}),s(k),Me(3,k,()=>De),d(c,k)},O=c=>{var k=ga();Me(3,k,()=>De),d(c,k)};D(ee,c=>{e.ollama.running_models.length>0?c(p):c(O,!1)})}s(r),C(()=>{i.disabled=e.ollama.ps_status==="pending",R(w,`${e.ollama.ps_polling_enabled?"stop":"start"} monitoring`)}),d(l,r),Fe()}Ee(["click"]);var ya=b("updating <!>",1),ba=b('<span class="white-space:nowrap"><!> </span> provider',1),xa=b("<div><!></div> <ul><li><!></li> <li><!></li> <li><!></li></ul>",1),ka=b('<div class="py_sm display:flex gap_sm align-items:start"><form class="flex:1"><div><div class="column justify-content:center gap_xs pl_md"><div class="font_size_xl"> <!></div> <span class="font_family_mono font_size_sm"><!></span></div></div> <fieldset><input type="password" placeholder="enter new API key" class="mb_sm"/> <div class="display:flex justify-content:space-between gap_xs"><button type="button" class="flex:1"><!></button> <button type="button" class="flex:1">reload</button> <button type="button" class="flex:1">delete key</button></div></fieldset></form> <div class="flex:1"><!></div></div>'),Ma=b('<small class="font_family_mono"> </small>'),Da=b('<div class="py_sm"><!></div>'),wa=b('<div class="display:flex flex-direction:column"><!></div>');function Ra(l,e){He(e,!0);const r=Ge(e,"show_info",3,!0),_=$e.get(),{capabilities:t}=_,u=J(()=>t[e.provider_name]),f=J(()=>_.providers.find_by_name(e.provider_name));let i=ke(""),m=ke(!1),g=ke(!1);const w=J(()=>a(i).trim());je(()=>{t[`init_${e.provider_name}_check`]()});const ee=async()=>{if(a(w)){N(m,!0);try{await _.api.provider_update_api_key({provider_name:e.provider_name,api_key:a(w)}),N(i,"")}catch(h){console.error(`Failed to update ${e.provider_name} API key:`,h)}finally{N(m,!1)}}},p=async()=>{N(m,!0);try{await _.api.provider_update_api_key({provider_name:e.provider_name,api_key:""})}catch(h){console.error(`Failed to delete ${e.provider_name} API key:`,h)}finally{N(m,!1)}},O=async()=>{N(g,!0);try{await _.api.provider_load_status({provider_name:e.provider_name})}catch(h){console.error(`Failed to check ${e.provider_name} connection:`,h)}finally{N(g,!1)}};var c=wa(),k=n(c);{var ae=h=>{var P=ka(),U=n(P),L=n(U);let te;Ae(L,"",{},{display:"display:flex !important","align-items":"flex-start !important","font-weight":"400 !important"});var x=n(L);Ae(x,"",{},{"min-height":"80px"});var M=n(x),X=n(M),z=v(X);{var Q=o=>{Pe(o,{inline:!0})};D(z,o=>{(a(u).status==="pending"||a(g))&&o(Q)})}s(M);var V=v(M,2),pe=n(V);{var ge=o=>{var y=A();C(()=>R(y,a(u).error_message)),d(o,y)},le=o=>{var y=Ye(),B=ie(y);{var ye=Y=>{var $=A("available");d(Y,$)},_e=Y=>{var $=Ye(),re=ie($);{var be=j=>{var I=A("backend unavailable");d(j,I)},ue=j=>{var I=A("Â ");d(j,I)};D(re,j=>{t.backend_available?j(ue,!1):j(be)},!0)}d(Y,$)};D(B,Y=>{a(u).status==="success"?Y(ye):Y(_e,!1)},!0)}d(o,y)};D(pe,o=>{a(u).error_message?o(ge):o(le,!1)})}s(V),s(x),s(L);var se=v(L,2),W=n(se);Ce(W);var Z=v(W,2),q=n(Z);q.__click=ee;var H=n(q);{var E=o=>{var y=ya(),B=v(ie(y));Pe(B,{inline:!0}),d(o,y)},ne=o=>{var y=A("update key");d(o,y)};D(H,o=>{a(m)?o(E):o(ne,!1)})}s(q);var F=v(q,2);F.__click=O;var de=v(F,2);de.__click=p,s(Z),s(se),s(U);var ce=v(U,2),he=n(ce);{var T=o=>{var y=xa(),B=ie(y),ye=n(B);ea(ye,{get provider(){return a(f)},children:(I,xe)=>{var G=ba(),Oe=ie(G),Se=n(Oe);oe(Se,{get glyph(){return Be}});var Te=v(Se);s(Oe),ve(),C(()=>R(Te,` ${a(f).title??""}`)),d(I,G)},$$slots:{default:!0}}),s(B);var _e=v(B,2),Y=n(_e),$=n(Y);we($,{get href(){return a(f).api_key_url},children:(I,xe)=>{ve();var G=A("get API key");d(I,G)},$$slots:{default:!0}}),s(Y);var re=v(Y,2),be=n(re);we(be,{get href(){return a(f).homepage},children:(I,xe)=>{ve();var G=A("homepage");d(I,G)},$$slots:{default:!0}}),s(re);var ue=v(re,2),j=n(ue);we(j,{get href(){return a(f).url},children:(I,xe)=>{ve();var G=A("docs");d(I,G)},$$slots:{default:!0}}),s(ue),s(_e),d(o,y)};D(he,o=>{r()&&o(T)})}s(ce),s(P),C(()=>{te=Re(L,1,"width:100% chip plain flex:1 flex-direction:column mb_lg",null,te,{color_b:a(u).status==="success",color_c:a(u).status==="failure",color_d:a(u).status==="pending"||a(g),color_e:a(u).status==="initial"}),R(X,`${a(f).name??""}
							${a(u).status==="success"?"configured":a(u).status==="failure"?"not configured":a(u).status==="pending"||a(g)?"checking":"not checked"} `),W.disabled=a(m)||!t.backend_available,q.disabled=!a(w)||a(m)||!t.backend_available,F.disabled=a(g)||a(m)||!t.backend_available,de.disabled=a(u).status!=="success"||a(m)||!t.backend_available}),Ze(W,()=>a(i),o=>N(i,o)),d(h,P)},S=h=>{var P=Da(),U=n(P);aa(U,{children:(L,te)=>{var x=Ma(),M=n(x);s(x),C(()=>R(M,`provider "${e.provider_name??""}" not found`)),d(L,x)},$$slots:{default:!0}}),s(P),d(h,P)};D(k,h=>{a(f)?h(ae):h(S,!1)})}s(c),d(l,c),Fe()}Ee(["click"]);export{Ra as C,Ca as O,la as a,da as b,me as c,na as d,sa as g};
