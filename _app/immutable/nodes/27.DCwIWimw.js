import"../chunks/DsnmJJEf.js";import{p as st,f as u,d as a,s as r,r as e,t as W,x as t,b as p,I as tt,z as V,n as A,c as rt,y as et,a as at,e as pt}from"../chunks/iOdzdy3x.js";import{d as ot,s as C,e as mt}from"../chunks/BEcV18IW.js";import{p as ut,i as E}from"../chunks/D_ShskPG.js";import{r as F,e as it,i as bt}from"../chunks/BFdLDlKi.js";import{b as N}from"../chunks/dr4kURsa.js";import{s as gt}from"../chunks/V2q5a4YM.js";import{p as ht}from"../chunks/DUTOU-i9.js";import{P as ft}from"../chunks/qE7b69L5.js";import{S as xt,P as kt}from"../chunks/CcY7VHHz.js";import{R as yt}from"../chunks/BasfJ2L8.js";import{i as U,o as X,j as wt}from"../chunks/BaMhdA5r.js";import{b as jt}from"../chunks/7UQNwviV.js";var Lt=u('<span class="chip color_e display:flex align-items:center svelte-4krhx6"> <button type="button" class="icon_button plain font_size_xs ml_xs" title="Remove tag"><!></button></span>'),Pt=u(`<div class="panel p_sm mb_md"><div class="mb_sm"><label><span class="display:block mb_xs">Path</span> <input type="text" class="width:100%" placeholder="./path/to/repo/checkout"/></label></div> <div class="mb_sm"><label><span class="display:block mb_xs">Label</span> <input type="text" class="width:100%" placeholder="description (e.g. 'development', 'some-feature-branch', 'some-bug-repro')"/></label></div> <div class="mb_sm"><span class="display:block mb_xs">Tags</span> <div class="display:flex flex-wrap:wrap gap_xs mb_xs"></div> <div class="display:flex gap_xs"><input type="text" placeholder="new tag" class="flex:1"/> <button type="button">add tag</button></div></div> <div class="display:flex justify-content:end"><button type="button" class="color_c"><!>&nbsp; delete checkout</button></div></div>`);function St(q,d){st(d,!0);const m=ut(d,"checkout",7);let s=tt(""),y=tt(void 0);var w=Pt(),b=a(w),h=a(b),j=r(a(h),2);F(j),e(h),e(b);var f=r(b,2),z=a(f),L=r(a(z),2);F(L),e(z),e(f);var P=r(f,2),S=r(a(P),2);it(S,21,()=>m().tags,bt,(v,I,T)=>{var R=Lt(),x=a(R),k=r(x);k.__click=()=>d.on_remove_tag(d.index,T);var B=a(k);U(B,{get glyph(){return X}}),e(k),e(R),W(()=>C(x,`${t(I)??""} `)),p(v,R)}),e(S);var H=r(S,2),o=a(H);F(o),jt(o,v=>V(y,v),()=>t(y));var c=r(o,2);c.__click=()=>{if(!t(s)){t(y)?.focus();return}d.on_add_tag(d.index,t(s)),V(s,"")},e(H),e(P);var l=r(P,2),_=a(l);_.__click=()=>d.on_remove(d.index);var D=a(_);U(D,{get glyph(){return X}}),A(),e(_),e(l),e(w),N(j,()=>m().path,v=>m().path=v),N(L,()=>m().label,v=>m().label=v),N(o,()=>t(s),v=>V(s,v)),p(q,w),rt()}ot(["click"]);var Dt=u("<!> <!>",1),Rt=u("<p><small> </small> <br/> <small> </small></p>"),Gt=u('<p class="mb_md">no checkouts yet</p>'),Et=u('<button type="button" class="color_c"><!>&nbsp; delete repo</button>'),zt=u(`<div class="p_lg"><h1 class="mb_lg">edit repo</h1> <div class="panel p_md width_atmost_md"><form><div class="mb_lg"><label><h3 class="mt_0 mb_sm">Git url</h3> <input type="text" class="width:100%"/></label> <p>enter the git URL, e.g. https://github.com/username/repo or
								git@github.com:username/repo.git</p></div> <!> <div class="mb_lg"><h3 class="mt_0 mb_sm">checkouts</h3> <!> <div class="mt_md"><button type="button" class="color_b"><!>&nbsp; add checkout</button></div></div> <div class="width:100% display:flex justify-content:space-between gap_sm"><div><button type="submit" class="color_a"> </button></div> <!></div></form></div></div>`),Ht=u('<div class="repo_layout svelte-15gkc4u"><!> <!> <div class="repo_content svelte-15gkc4u"><!></div></div>');function Ot(q,d){st(d,!0);const m=ht.get(),s=et(()=>m.current_repos_viewmodel),y=(o,c)=>{if(!t(s)||!c.trim())return;const l=t(s).checkouts[o];l&&!l.tags.includes(c)&&l.tags.push(c)},w=(o,c)=>{if(!t(s))return;const l=t(s).checkouts[o];l&&l.tags.splice(c,1)},b=et(()=>m.current_project);var h=Ht(),j=a(h);ft(j,{});var f=r(j,2);{var z=o=>{var c=Dt(),l=at(c);xt(l,{get project(){return t(b)},section:"repos"});var _=r(l,2);yt(_,{}),p(o,c)};E(f,o=>{t(b)&&o(z)})}var L=r(f,2),P=a(L);{var S=o=>{var c=zt(),l=r(a(c),2),_=a(l),D=a(_),v=a(D),I=r(a(v),2);F(I),e(v),A(2),e(D);var T=r(D,2);{var R=i=>{var n=Rt(),g=a(n),G=a(g);e(g);var Y=r(g,4),O=a(Y);e(Y),e(n),W((Q,_t)=>{C(G,`created ${Q??""}`),C(O,`updated ${_t??""}`)},[()=>new Date(t(s).repo.created).toLocaleString(),()=>new Date(t(s).repo.updated).toLocaleString()]),p(i,n)};E(T,i=>{t(s).repo&&i(R)})}var x=r(T,2),k=r(a(x),2);{var B=i=>{var n=Gt();p(i,n)},lt=i=>{var n=pt(),g=at(n);it(g,19,()=>t(s).checkouts,G=>G.id,(G,Y,O)=>{St(G,{get checkout(){return t(Y)},get index(){return t(O)},on_remove:Q=>t(s).remove_checkout_dir(Q),on_add_tag:y,on_remove_tag:w})}),p(i,n)};E(k,i=>{t(s).checkouts.length===0?i(B):i(lt,!1)})}var Z=r(k,2),J=a(Z);J.__click=()=>t(s).add_checkout_dir();var ct=a(J);U(ct,{get glyph(){return wt}}),A(),e(J),e(Z),e(x);var $=r(x,2),K=a($),M=a(K),nt=a(M,!0);e(M),e(K);var vt=r(K,2);{var dt=i=>{var n=Et();n.__click=()=>t(s).remove_repo();var g=a(n);U(g,{get glyph(){return X}}),A(),e(n),p(i,n)};E(vt,i=>{t(s).repo&&i(dt)})}e($),e(_),e(l),e(c),W(()=>{M.disabled=t(s).repo&&!t(s).has_changes,C(nt,t(s).repo?"save changes":"add repo")}),mt("submit",_,i=>{gt(i),t(s).save_repo_settings()}),N(I,()=>t(s).git_url,i=>t(s).git_url=i),p(o,c)},H=o=>{kt(o,{})};E(P,o=>{t(b)&&t(s)?o(S):o(H,!1)})}e(L),e(h),p(q,h),rt()}ot(["click"]);export{Ot as component};
