import"../chunks/DsnmJJEf.js";import{p as _e,e as ce,a as K,b as u,c as me,x as a,I as ue,f as g,d as e,y as H,r as t,s,t as Q,z as ge,n as U,a2 as fe}from"../chunks/iOdzdy3x.js";import{d as be,s as he}from"../chunks/BEcV18IW.js";import{i as Y}from"../chunks/D_ShskPG.js";import{c as xe,r as X,s as we}from"../chunks/BFdLDlKi.js";import{b as z}from"../chunks/dr4kURsa.js";import{g as je}from"../chunks/FtGonpNI.js";import{r as ye}from"../chunks/0t0-Q01r.js";import{M as Z}from"../chunks/CYOjVlWW.js";import{p as Pe}from"../chunks/DUTOU-i9.js";import{P as ke}from"../chunks/qE7b69L5.js";import{S as qe,P as Ee}from"../chunks/CcY7VHHz.js";import{P as Le}from"../chunks/DYaQ5hnR.js";import{i as A,q as $,o as Se,r as Ge}from"../chunks/BaMhdA5r.js";import{f as He}from"../chunks/DBfbqCZr.js";var Ye=g('<div><div class="markdown_preview p_lg svelte-jqr1x4"><!></div> <button type="button" class="position:fixed top:0 right:0 icon_button plain border_radius_0" aria-label="close preview" title="close preview"><!></button></div>'),ze=g("<!> <!>",1),Ae=g('<div class="height:100% column p_lg"><div><div class="display:flex gap_sm align-items:center"><h1 class="mb_lg"> </h1></div> <div class="display:flex width:100% justify-content:space-between gap_sm mb_lg"><div class="display:flex gap_sm"><button type="button" class="color_a">save</button> <button type="button" class="plain" title="Preview page"><!>&nbsp; preview</button></div> <button type="button" class="color_c"><!>&nbsp; delete</button></div></div> <div class="panel p_md mb_md"><div class="display:flex gap_sm"><div class="flex:1"><label>page title <input type="text" class="width:100%" placeholder="page title"/></label></div> <div class="flex:1"><label>page path <input type="text" class="width:100%" placeholder="/page-path"/></label></div></div></div> <div class="editor_area svelte-jqr1x4"><div class="panel p_md content_area svelte-jqr1x4"><textarea class="width:100% height:100% markdown_editor svelte-jqr1x4"></textarea></div> <div class="panel p_md preview_area svelte-jqr1x4"><div class="markdown_preview svelte-jqr1x4"><!></div></div></div></div>'),De=g('<div class="editor_layout svelte-jqr1x4"><!> <!> <div class="editor_content svelte-jqr1x4"><!></div></div>');function Xe(ee,te){_e(te,!0);const f=Pe.get(),ae=He.get(),r=H(()=>f.current_page_viewmodel);let b=ue(!1);const D=()=>{ge(b,!a(b))},re=()=>{const o=f.current_project_viewmodel;!a(r)?.project||!a(r).current_page||!o||confirm("Are you sure you want to delete this page? This action cannot be undone.")&&(o.delete_project_page(a(r).page_id),je(ye(`/projects/${a(r).project_id}/pages`)))},h=H(()=>f.current_project);var I=ce(),se=K(I);{var ie=o=>{var v=Ye();let _;var l=e(v),x=e(l);{let j=H(()=>a(r)?.content??"");Z(x,{get content(){return a(j)}})}t(l);var d=s(l,2);d.__click=D;var w=e(d);A(w,{get glyph(){return $}}),t(d),t(v),Q(()=>_=xe(v,1,"preview_fullscreen svelte-jqr1x4",null,_,{offset_for_sidebar:ae.ui.show_sidebar})),u(o,v)},oe=o=>{var v=De(),_=e(v);ke(_,{});var l=s(_,2);{var x=i=>{var n=ze(),p=K(n);qe(p,{get project(){return a(h)},section:"pages"});var c=s(p,2);Le(c,{}),u(i,n)};Y(l,i=>{a(h)&&i(x)})}var d=s(l,2),w=e(d);{var j=i=>{var n=Ae(),p=e(n),c=e(p),M=e(c),le=e(M,!0);t(M),t(c);var R=s(c,2),y=e(R),P=e(y);P.__click=()=>a(r).save_page();var k=s(P,2);k.__click=D;var de=e(k);A(de,{get glyph(){return $}}),U(),t(k),t(y);var q=s(y,2);q.__click=re;var ne=e(q);A(ne,{get glyph(){return Se}}),U(),t(q),t(R),t(p);var E=s(p,2),T=e(E),L=e(T),C=e(L),F=s(e(C));X(F),t(C),t(L);var N=s(L,2),O=e(N),V=s(e(O));X(V),t(O),t(N),t(T),t(E);var W=s(E,2),S=e(W),G=e(S);fe(G),t(S);var B=s(S,2),J=e(B),pe=e(J);Z(pe,{get content(){return a(r).content}}),t(J),t(B),t(W),t(n),Q(()=>{he(le,a(r).current_page?.title||"Page"),P.disabled=!a(r).has_changes,we(G,"placeholder",`${Ge} markup`)}),z(F,()=>a(r).title,m=>a(r).title=m),z(V,()=>a(r).path,m=>a(r).path=m),z(G,()=>a(r).content,m=>a(r).content=m),u(i,n)},ve=i=>{Ee(i,{})};Y(w,i=>{a(r)&&a(h)?i(j):i(ve,!1)})}t(d),t(v),u(o,v)};Y(se,o=>{a(b)?o(ie):o(oe,!1)})}u(ee,I),me()}be(["click"]);export{Xe as component};
